<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>会員検索 - kousaiclub.jp</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      background-color: #f0f0f0;
    }

    .search-form {
      margin: 20px;
      background: #fff;
      padding: 20px;
      border-radius: 8px;
    }

    .search-button {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #182a69;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .search-results {
      margin: 20px;
      padding: 20px;
      background-color: #fff;
      border-radius: 8px;
    }

    .card {
      display: inline-block;
      width: 45%;
      margin: 10px;
      padding: 10px;
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .card img {
      max-width: 100%;
      border-radius: 5px;
    }

    .card-text {
      padding: 10px;
      text-align: center;
    }
  </style>
</head>
<body>

  <!-- 検索フォーム -->
  <div class="search-form">
    <label>年齢（From / To）<br>
      <input type="number" id="ageFrom" placeholder="From"> ～ <input type="number" id="ageTo" placeholder="To">
    </label><br><br>
    <label>身長（From / To）<br>
      <input type="number" id="heightFrom" placeholder="From"> ～ <input type="number" id="heightTo" placeholder="To">
    </label><br><br>
    <label>趣味（部分一致）<br>
      <input type="text" id="hobby" placeholder="趣味を入力">
    </label><br><br>
    <button class="search-button" onclick="search()">検索</button>
  </div>

  <!-- 検索結果表示 -->
  <div class="search-results" id="searchResults">
    ※検索結果がここに表示されます。
  </div>

  <script>
    // 検索ボタンをクリックしたときに呼ばれる関数
    function search() {
      // 検索条件を取得
      let searchAgeFrom = document.getElementById('ageFrom').value;
      let searchAgeTo = document.getElementById('ageTo').value;
      let searchHeightFrom = document.getElementById('heightFrom').value;
      let searchHeightTo = document.getElementById('heightTo').value;
      let searchHobby = document.getElementById('hobby').value;

      // GitHubからデータを取得
      fetch('https://raw.githubusercontent.com/kousaiclub-vol1/data/main/members.json')
        .then(response => response.json())
        .then(data => {
          // 条件に該当する会員をフィルタリング
          let filteredMembers = data.filter(member => {
            return (member.年齢 >= searchAgeFrom && member.年齢 <= searchAgeTo) &&
                   (member.身長 >= searchHeightFrom && member.身長 <= searchHeightTo) &&
                   (searchHobby === "" || member.趣味.includes(searchHobby));  // hobbyが空の場合は条件を無視
          });

          // 検索結果を表示
          const resultsContainer = document.getElementById('searchResults');
          resultsContainer.innerHTML = ""; // 既存の結果をクリア

          if (filteredMembers.length > 0) {
            filteredMembers.forEach(member => {
              let memberCard = createMemberCard(member); // 会員カードを生成する関数
              resultsContainer.appendChild(memberCard);
            });
          } else {
            resultsContainer.innerHTML = "該当する会員は見つかりませんでした。";
          }
        });
    }

    // 会員カードを生成する関数
    function createMemberCard(member) {
      let card = document.createElement('div');
      card.classList.add('card');
      card.innerHTML = `
        <div class="card-image">
          <a href="member${member.会員No}.html" target="_blank">
            <img src="images/${member.写真[0]}" alt="${member.氏名}">
          </a>
        </div>
        <div class="card-text">
          <p><strong>No.</strong> ${member.会員No} ${member.氏名}</p>
          <p>${member.身長}cm (${member.年齢}歳)</p>
          <p>趣味: ${member.趣味}</p>
          <p class="comment">${member.コメント}</p>
        </div>
      `;
      return card;
    }
  </script>

</body>
</html>
